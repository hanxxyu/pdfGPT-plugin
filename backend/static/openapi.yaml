openapi: 3.0.1
info:
  title: Ask to PDF
  description: 一个允许用户使用文心一言加载和查询 PDF 的插件。
  version: 'v1'
servers:
  - url: http://localhost:3333
paths:
  /pdf/load:
    post:
      operationId: loadPdf
      summary: Load a PDF document
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/loadPdfRequest"
      responses:
        "200":
          description: 加载文件成功！
          content:
            application/json:
              schema:
                  $ref: "#/components/schemas/messageResponse"
  /pdf/query:
    post:
      operationId: queryPdf
      summary: Query a loaded PDF document
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/queryPdfRequest"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/queryPdfResponse"

components:
  schemas:
    loadPdfRequest:
      type: object
      required: [url]
      properties:
        url:
          type: string
          description: 远程文件url地址，用<url><\url>包含
    queryPdfRequest:
      type: object
      required:
        - query
        - pdf_url
      properties:
        query:
          type: string
          description: The query or question to ask based on the PDF document.
          required: true
        pdf_url:
          type: string
          format: uri
          description: The temporary URL of the PDF document that is already loaded.
          required: true
    queryPdfResponse:
      type: object
      properties:
        results:
          type: array
          items:
            type: string
          description: The list of text chunks from the PDF document that are relevant to the user's query.
  # /documentation/{service}:
  #   get:
  #     operationId: getDocumentation
  #     summary: Get the PDF URLs of a Huawei Cloud service documentation
  #     parameters:
  #     - in: path
  #       name: service
  #       schema:
  #           type: string
  #       required: true
  #       description: The name of the Huawei Cloud service.
  #     responses:
  #       "200":
  #         description: OK
  #         content:
  #           application/json:
  #             schema:
  #               type: object
  #               properties:
  #                 urls:
  #                   type: array
  #                   items:
  #                     type: string
  #                   description: The list of PDF URLs.